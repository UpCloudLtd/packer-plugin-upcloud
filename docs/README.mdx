# UpCloud Packer Plugin

This is a plugin for Packer which can be used to generate storage templates on UpCloud. 
It utilises the [UpCloud Go API](https://github.com/UpCloudLtd/upcloud-go-api) to interface with the UpCloud API.

## Installation

## Dummy section to test docs generator

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Sed pulvinar proin gravida hendrerit lectus. Orci porta non pulvinar neque laoreet suspendisse interdum consectetur libero. Elementum nibh tellus molestie nunc non blandit massa enim nec. Est pellentesque elit ullamcorper dignissim cras tincidunt lobortis feugiat vivamus. Vitae justo eget magna fermentum iaculis eu. Natoque penatibus et magnis dis parturient montes nascetur ridiculus. Tellus in hac habitasse platea dictumst vestibulum rhoncus est pellentesque. Gravida dictum fusce ut placerat orci nulla pellentesque dignissim. Id diam maecenas ultricies mi eget mauris pharetra. Sed adipiscing diam donec adipiscing tristique risus nec. Ut sem nulla pharetra diam sit amet nisl. Malesuada fames ac turpis egestas sed tempus urna et pharetra. Rutrum quisque non tellus orci ac auctor augue mauris augue.

### Using pre-built releases

#### Using the `packer init` command

Starting from version 1.7, Packer supports a new `packer init` command allowing
automatic installation of Packer plugins. Read the
[Packer documentation](https://www.packer.io/docs/commands/init) for more information.

To install this plugin, copy and paste this code into your Packer configuration .
Then, run [`packer init`](https://www.packer.io/docs/commands/init).

```hcl
packer {
  required_plugins {
    upcloud = {
      version = ">=v1.0.0"
      source  = "github.com/UpCloudLtd/upcloud"
    }
  }
}

```

#### Manual installation

You can find pre-built binary releases of the plugin [here](https://github.com/hashicorp/packer-plugin-upcloud/releases).
Once you have downloaded the latest archive corresponding to your target OS,
uncompress it to retrieve the plugin binary file corresponding to your platform.
To install the plugin, please follow the Packer documentation on
[installing a plugin](https://www.packer.io/docs/extending/plugins/#installing-plugins).


#### From Source

If you prefer to build the plugin from its source code, clone the GitHub
repository locally and run the command `go build` from the root
directory. Upon successful compilation, a `packer-plugin-upcloud` plugin
binary file can be found in the root directory.
To install the compiled plugin, please follow the official Packer documentation
on [installing a plugin](https://www.packer.io/docs/extending/plugins/#installing-plugins).


## Plugin Contents

### Builders

- [upcloud](/docs/builders/upcloud.mdx) - The upcloud builder is used to generate storage templates on UpCloud.

### Post-processors

- [upcloud-import](/docs/post-processors/upcloud-import.mdx) - The upcloud import post-processors is used to import disk images to UpCloud.

## JSON Templates
From Packer version 1.7.0, template HCL2 becomes officially the preferred way to write Packer configuration. While the `json` format is still supported, but certain new features, such as `packer init` works only in newer HCL2 format.
If you are using `json` config templates, please consider upgrading them using the packer built-in command:

```sh
$ packer hcl2_upgrade example.json
Successfully created example.json.pkr.hcl
```
